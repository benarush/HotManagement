{% extends "Tasks/base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'Tasks\DataTable\datatables.min.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'Tasks\customDesins.css' %}" />
<div class="container mb-3 mt-3" style="text-align:center;">
    <div class='title-tasks mb-2'>All My Tasks</div>
        <table class="table table-striped mydatatable mr-3 mt-4" style="width:100%;">
            <thead class="thead-dark">
                <tr>
                    <th>Problem</th>
                    <th>Description</th>
                    <th>Start Date</th>
                    <th>Weeks</th>
                    <th>Edit</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
            {% for task in tasks %}
            <tr>

                    <td>{{task.problem}}</td>
                    <td>{{task.description}}</td>
                    <td>{{task.fullName}}</td>
                    <td>{{task.weeks }}</td>
                    <td><a href="{% url 'edit-task' task.id %}">
                        <img src="{% static 'Tasks\table_images\edit.png' %}"></a>
                    </td>
                    <td><a href="{% url 'delete-task' task.id %}">
                        <img src="{% static 'Tasks\table_images\delete.png' %}"></a>
                    </td>
            </tr>
            {% endfor %}
            <tfoot>
                <tr>
                    <th colspan="3" class="text-right">Total:</th>
                    <th colspan="1"></th>
                </tr>
            </tfoot>
        </table>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>

<script type="text/javascript" src="{% static 'Tasks\DataTable\datatables.min.js' %}"></script>


<script>
    $('.mydatatable').DataTable({
        footerCallback: function (row, data, start, end, display) {
            var api = this.api(), data;

            var intVal = function (i) {
                return typeof i === 'string' ?
                    i.replace(/[\$,]/g, '') * 1 :
                    typeof i === 'number' ?
                        i : 0;
            };
            total = api
                .column(3)
                .data()
                .reduce(function (a, b) {
                    return intVal(a) + intVal(b);
                }, 0);

            $( api.column(3).footer()).html(total);
        }
    });

</script>
{% endblock content %}