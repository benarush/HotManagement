{% extends "Tasks/base.html" %}
{% load static %}
{% block content %}

<div id="calendar-container">
    <div id="calendar">

    </div>
    
</div>
    
<script src="{% static 'Calendar\lib\main.js' %}"></script>
<link rel="stylesheet" href="{% static 'Calendar\lib\main.css' %}" >

<script >
      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
          },
          initialView: 'dayGridMonth',
          selectable: true,
          events: [
            {% for task in tasks %}
                {
                  title: `{{ task.problem}}`,
                  start: `{{ task.start_date|date:"Y-m-d" }}`,
                  end:   `{{ task.end_date|date:"Y-m-d" }}`,
                  url:   `{% url 'task-details' task.id %}`,
                  description: `{{ task.description }}`
                },
            {% endfor %}
          ],

        eventDidMount: function(info) {
          $(info.el).tooltip({
            title: info.event.extendedProps.description,
            placement: "top",
            trigger: "hover",
            container: "body"
          });
        },


        });
            calendar.render();
        });
</script>

{% endblock content %}